version: '1.0'

stages: []

steps:
  main_clone:
    title: Cloning main repository...
    type: git-clone
    repo: '${{CF_REPO_OWNER}}/${{CF_REPO_NAME}}'
    revision: '${{CF_REVISION}}'

  BuildingDockerImage:
    title: Building Docker Image
    type: build
    image_name: duck1123/dinsro
    working_directory: ./
    tag: '${{CF_BRANCH_TAG_NORMALIZED}}'
    dockerfile: Dockerfile

  # build_image:
  #   type: build
  #   description: Building the image...
  #   image-name: myuser/myservice
  #   tag: develop # ${{CF_BRANCH}}

  # perform_tests:
  #   image: node:5
  #   working_directory: ${{main_clone}}
  #   description: Performing unit tests...
  #   commands:
  #     - npm install gulp -g
  #     - npm install
  #     - gulp unit_test
